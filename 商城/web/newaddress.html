<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Address</title>
    <link rel="stylesheet" href="../css/header-title.css">
    <link rel="stylesheet" href="../css/header-banner.css">
    <link rel="stylesheet" href="../css/header-search.css">
    <link rel="stylesheet" href="../css/title-nav.css">
    <link rel="stylesheet" href="../css/address.css">
    <link rel="stylesheet" href="../css/modal.css">
    <link rel="stylesheet" href="../css/reset.css">
</head>
<body>
<!--header-title-->
<div id="header-title">
    <div id="title">
        <dl>
            <dd>欢迎来到爱奇艺商城</dd>
            <dd id='login'><a href='login.html'>请登录</a></dd>
            <a href="newaddress.html" class="address"><dd id='username'></dd></a>
            <dd id=eit><a href="javascript:localStorage.clear(); location.reload();">退出</a></dd>
            <dd><a href="register.html">免费注册</a></dd>
        </dl>
        <ul>
            <li><i class='cat'></i><a href="cart.html">购物车</a></li>
            <li><i class='buyer'></i><a href="order.html">买家中心</a></li>
            <li><i class='collection'></i><a href="#">我的收藏</a></li>
            <li><i class='seller'></i><a href="#">关注我们</a></li>
            <li><a href="http://www.iqiyi.com/">爱奇艺首页</a></li>
        </ul>
    </div>
</div>
<!--top-banner-->
<div class="top-banner">
    <a href="hotshop.html"><div class="big-top-banner"></div></a>
    <a href="hotshop.html"><div class="small-top-banner"></div></a>
    <span class="top-banner-fold">展开</span>
</div>
<!--header-serach-->
<div id="searchbox">
    <div id="search">
        <a href="index.html"></a>
        <div id='search-k'>
            <input type="text" placeholder="请输入搜索内容"><input type="submit" value="搜索">
        </div>
        <span id='craousel-one' class="craousel">
          <a href="http://so.iqiyi.com/mall?keyword=%E8%9C%9C%E4%B8%9D%E4%BD%9B%E9%99%80&mode=1&price_range=&free_delivery=0&discount=0&page=1&qc=0&comm_ctg=&ctg_prop=&ctgId="></a>
          <p><a href="http://so.iqiyi.com/mall?keyword=%E8%9C%9C%E4%B8%9D%E4%BD%9B%E9%99%80&mode=1&price_range=&free_delivery=0&discount=0&page=1&qc=0&comm_ctg=&ctg_prop=&ctgId=">明星底妆</a></p>
          <p><a href="http://so.iqiyi.com/mall?keyword=%E8%9C%9C%E4%B8%9D%E4%BD%9B%E9%99%80&mode=1&price_range=&free_delivery=0&discount=0&page=1&qc=0&comm_ctg=&ctg_prop=&ctgId=">精致遮瑕 水润保湿</a></p>
        </span>
        <span id='craousel-two' class="craousel">
          <a href="http://mall.iqiyi.com/item/19rrn59zvc"></a>
          <p><a href="http://mall.iqiyi.com/item/19rrn59zvc">爱奇艺VR眼镜</a></p>
          <p><a href="http://mall.iqiyi.com/item/19rrn59zvc">带你阅悦到嗨</a></p>
        </span>
    </div>
</div>
<!--title-nav-->
<div class="nav-wrap">
    <div class="nav-center">
        <div class="drop-box">
            <i></i>
            <span>全部商品分类</span>
            <b></b>
        </div>
        <ul class="nav-box"></ul>
    </div>
</div>
<!--address-->
<main>
    <span class="infoder">收货地址:</span>
    <input type="button" id="add-address" value="添加收货地址" />
    <div class="addressall">
        <div>
            <ul class="address-ul">
            </ul>
        </div>
        <div class="show-all-address">显示全部地址</div>
        <!--<script src="../js/animate.js" charset="utf-8"></script>-->
        <!--<script>-->
            <!--var oShowAllAddress = document.querySelector('.show-all-address');-->
            <!--oShowAllAddress.addEventListener('click', function(){-->
                <!--var oAddressUl = document.querySelector('.address-ul');-->
                <!--var overflow = fetchComputedStyle(oAddressUl, 'overflow');-->
                <!--var flag = overflow === 'hidden' ? false : true;-->
                <!--oAddressUl.style.overflow = !flag ? 'visible' : 'hidden';-->
                <!--this.innerText = flag ? '显示全部地址' : '隐藏地址';-->
            <!--});-->
        <!--</script>-->
    </div>
    <!--<script type="text/javascript" src="../js/myajax.js"></script>-->
    <!--<script>-->
        <!--//ajax读取到收货地址并显示-->
        <!--function showAddress() {-->
            <!--myajax.get('http://h6.duchengjiu.top/shop/api_useraddress.php',-->
                <!--{token: localStorage.token},-->
                <!--function(error, responseText) {-->
                    <!--var json = JSON.parse(responseText);-->
                    <!--console.log(json);-->
                    <!--var data = json.data;-->
                    <!--var oAddressUl = document.querySelector('.address-ul');-->
                    <!--if (data.length === 0) {-->
                        <!--oAddressUl.innerHTML = '<h2>您还没有收货地址，请点击添加收货地址</h2>';-->
                        <!--return;-->
                    <!--}-->
                    <!--oAddressUl.innerHTML = '';-->
                    <!--for (var i = data.length - 1; i >= 0; i&#45;&#45;) {-->
                        <!--var obj = data[i];-->
                        <!--oAddressUl.innerHTML += `-->
                            <!--<li data-id="${obj.address_id}">-->
                              <!--<span>收货人：${obj.consignee}</span><span name="delete" class="delete" data-id="${obj.address_id}">删除</span><br />-->
                              <!--<span>手机：${obj.mobile}</span><br />-->
                              <!--<span>地址：${obj.address}</span>-->
                            <!--</li>-->
            <!--`;-->
                    <!--}-->
                <!--})-->
        <!--}-->
        <!--showAddress();-->

        <!--var selected_address_id = 0;//如果这个值为0，无法下订单，当点击一个收货地址时，给这个变量赋值-->
        <!--//给收货地址添加一个事件代理-->
        <!--var oAddressUl = document.querySelector('.address-ul');-->
        <!--oAddressUl.onclick = function(event) {-->
            <!--event = event || window.event;-->
            <!--var target = event.target || event.srcElement;-->
            <!--console.log(target.nodeName);-->
            <!--if (target.className === 'delete') {-->
                <!--if (!confirm('确认要删除收货地址吗？')) {-->
                    <!--return;-->
                <!--}-->
                <!--var address_id = target.dataset.id;-->
                <!--console.log(address_id);-->
                <!--myajax.get('http://h6.duchengjiu.top/shop/api_useraddress.php',-->
                    <!--{status: 'delete', address_id, token: localStorage.token}, function(error, responseText){-->
                        <!--var json = JSON.parse(responseText);-->
                        <!--if (json.code === 0) {-->
                            <!--target.parentNode.parentNode.removeChild(target.parentNode);-->
                        <!--}-->
                    <!--})-->
            <!--} else {-->
                <!--//先让所有li元素的样式清空-->
                <!--var oAddressLis = oAddressUl.querySelectorAll('li');-->
                <!--for (var i = 0; i < oAddressLis.length; i++) {-->
                    <!--oAddressLis[i].classList.remove('selected');-->
                <!--}-->

                <!--if (target.nodeName === 'LI') {-->
                    <!--//点击LI元素选择一个收货地址-->
                    <!--selected_address_id = parseInt(target.dataset.id);-->
                    <!--target.classList.add('selected');-->
                <!--} else if (target.nodeName === 'SPAN'){-->
                    <!--selected_address_id = parseInt(target.parentNode.dataset.id);-->
                    <!--target.parentNode.classList.add('selected');-->
                <!--}-->

            <!--}-->
        <!--}-->
    <!--</script>-->

    <button id="order">下订单</button>
    <!--<script>-->
        <!--var oOrder = document.querySelector('#order');-->
        <!--oOrder.onclick = function() {-->
            <!--var address_id = selected_address_id;-->
            <!--if (address_id === 0) {-->
                <!--alert('请选择一个收货地址');-->
                <!--return;-->
            <!--}-->
            <!--var total_prices = localStorage.sum;-->
            <!--myajax.post('http://h6.duchengjiu.top/shop/api_order.php?token='+localStorage.token+'&status=add', {address_id, total_prices}, function(err, responseText){-->
                <!--var json = JSON.parse(responseText);-->
                <!--console.log(json);-->
                <!--if (json.code === 0) {-->
                    <!--alert('下订单成功');-->
                    <!--location.href = 'order.html';-->
                <!--}-->
            <!--});-->

        <!--}-->
    <!--</script>-->
</main>

<div class="modal register">
    <div class="container">
        <div class="hd">添加收货地址<span class="close">关闭</span></div>
        <div class="bd">
            <form class="addressform">
                <label>
                    地址名称: <input type="text" name="address_name" placeholder="请输入收货地址">
                </label>
                <label>
                    收货人: <input type="text" name="consignee" placeholder='请输入收货人'>
                </label>
                <label>
                    国家: <input type="text" name="country" placeholder="请输入国家">
                </label>
                <label>
                    省: <input type="text" name="province" placeholder="请输入省">
                </label>
                <label>
                    市: <input type="text" name="city" placeholder="请输入市">
                </label>
                <label>
                    区: <input type="text" name="district" placeholder="请输入区">
                </label>
                <label>
                    地址: <input type="text" name="address" placeholder="请输入地址">
                </label>
                <label>
                    邮编: <input type="text" name="zip_code" placeholder="请输入邮编">
                </label>
                <label>
                    手机号: <input type="text" name="mobile" placeholder="请输入手机号">
                </label>
                <label>
                    邮箱: <input type="text" name="email" placeholder='请输入邮箱'>
                </label>
                <label>
                    电话: <input type="text" name="tel" placeholder="请输入座机(如果没有请输入手机号)">
                </label>
                <label>
                    最佳送货时间: <input type="text" name="besttime" value="周一到周五">
                </label>
                <label>
                    标志物: <input type="text" name="sign_building" placeholder="请输入标志物(如果不知道可以不填写)">
                </label>
                <label>
                    <input type="button" value="添加" class="add">
                </label>
            </form>
        </div>
    </div>
</div>
<!--<script src="../js/myajax.js" charset="utf-8"></script>-->
<!--<script src="../js/modal.js" charset="utf-8"></script>-->
<!--<script>-->
    <!--var modal = new Modal('#add-address');-->

    <!--//给添加按钮添加事件-->
    <!--var oAdd = document.querySelector('.add');-->
    <!--oAdd.onclick = function() {-->
        <!--var postobj = serializeForm(document.querySelector('.addressform'));-->
        <!--myajax.post('http://h6.duchengjiu.top/shop/api_useraddress.php?status=add&token='+localStorage.token, postobj, function(err, responseText){-->
            <!--var json = JSON.parse(responseText);-->
            <!--console.log(json);-->
            <!--if (json.code === 0) {-->
                <!--modal.hide();-->
                <!--showAddress();-->
            <!--}-->
        <!--});-->
    <!--}-->
<!--</script>-->

</body>
</html>

<script type="text/javascript" src="../js/animate.js"></script>
<script type="text/javascript" src="../js/myajax.js"></script>
<script type="text/javascript" src="../js/header.js"></script>
<script type="text/javascript" src="../js/title-nav.js"></script>
<script type="text/javascript" src="../js/header-banner.js"></script>
<script type="text/javascript" src="../js/lunbofist.js"></script>
<script type="text/javascript" src="../js/header-search.js"></script>
<script src="../js/modal.js" charset="utf-8"></script>
<script type="text/javascript" src="../js/address.js"></script>
